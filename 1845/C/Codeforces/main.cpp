//
//  main.cpp
//  Codeforces
//
//  Created by loyinglin.
//  Copyright loyinglin. All rights reserved.

/************************** é¢˜è§£ **********************
 [é¢˜ç›®é“¾æ¥](https://codeforces.com/contest/1845/problem/C)
 **é¢˜ç›®å¤§æ„ï¼š**
 å°æ˜è¦è®¾ç½®å¯†ç ï¼Œå¯†ç é•¿åº¦ä¸ºmï¼Œç”±æ•°å­—0åˆ°9ç»„æˆï¼Œå¹¶ä¸”å¯†ç ä¸èƒ½ä¸ºå­—ç¬¦ä¸²sçš„å­åºåˆ—ï¼›
 åŒæ—¶æœ‰å­—ç¬¦ä¸²lå’Œå­—ç¬¦ä¸²rï¼Œå°æ˜è®¾ç½®çš„å¯†ç aè¦æ»¡è¶³ l[i] <= a[i] ä¸” a[i] <= r[i];
 é—®ï¼Œå°æ˜æ˜¯å¦èƒ½å¤Ÿæ‰¾åˆ°æ»¡è¶³è¦æ±‚çš„å¯†ç ã€‚
 
 **è¾“å…¥ï¼š**
 ç¬¬ä¸€è¡Œï¼Œæ•´æ•°ğ‘¡ è¡¨ç¤ºtä¸ªæ ·ä¾‹ ğ‘¡ (1â‰¤ğ‘¡â‰¤1000)
 æ¯ä¸ªæ ·ä¾‹4è¡Œ
 ç¬¬ä¸€è¡Œå­—ç¬¦ä¸²ğ‘ (1â‰¤|ğ‘ |â‰¤3â‹…1e5)
 ç¬¬äºŒè¡Œæ•´æ•°ğ‘š ï¼Œè¡¨ç¤ºå­—ç¬¦ä¸²lå’Œmçš„é•¿åº¦ (1â‰¤ğ‘šâ‰¤10 )
 ç¬¬ä¸‰è¡Œå­—ç¬¦ä¸²l
 ç¬¬å››è¡Œå­—ç¬¦ä¸²r
 
 
 **è¾“å‡ºï¼š**
 æ¯ä¸ªæ ·ä¾‹ä¸€è¡Œï¼Œå¦‚æœæœ‰æ»¡è¶³è¦æ±‚çš„å¯†ç ï¼Œåˆ™è¾“å‡ºYESï¼›å¦‚æœä¸å­˜åœ¨åˆ™è¾“å‡ºNOï¼›
 
 **Examples**
 **input**
 5
 88005553535123456
 2
 50
 56
 123412341234
 3
 111
 444
 1234
 4
 4321
 4321
 459
 2
 49
 59
 00010
 2
 10
 11


 **output**
 YES
 NO
 YES
 NO
 YES



 **é¢˜ç›®è§£æï¼š**
 å¦‚æœé‡‡ç”¨æš´åŠ›åšæ³•ï¼Œæšä¸¾å°æ˜å¯èƒ½å­˜åœ¨çš„å¯†ç æ•°é‡ï¼Œä¼šæœ‰æ¯”è¾ƒå¤§çš„æ•°é‡ï¼Œå¹¶ä¸”åˆ¤æ–­æ˜¯å¦ä¸ºå­åºåˆ—ä¹Ÿæœ‰O(N)çš„å¤æ‚åº¦ï¼›
 æ¢ä¸€ç§åˆ†æçš„æ€è·¯ï¼Œç«™åœ¨å°æ˜çš„è§’åº¦ï¼Œå¯¹äºç¬¬iä¸ªå¯†ç ï¼Œä»–ä¸€å…±æœ‰vecè‹¥å¹²ä¸ªé€‰æ‹©ï¼Œä¹Ÿå°±æ˜¯åŒºé—´ï¼ˆl[i]ï¼Œ r[i]ï¼‰ï¼›
 å¯¹äºå­—ç¬¦ä¸²sï¼Œæˆ‘ä»¬ä»å·¦åˆ°å³éå†ï¼Œå¦‚æœæŸä¸ªå­—ç¬¦æ²¡æœ‰å‡ºç°åœ¨vecä¸­ï¼Œé‚£ä¹ˆè¿™ä¸ªå­—ç¬¦å¯¹é¢˜ç›®æ²¡æœ‰å½±å“ï¼Œå¯ä»¥ç›´æ¥è·³è¿‡ï¼›
 å¦‚æœæŸä¸ªå­—ç¬¦cåœ¨vecä¸­å‡ºç°ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨vecä¸­ç§»é™¤è¿™ä¸ªå­—ç¬¦ï¼Œè¡¨ç¤ºå°æ˜æ— æ³•é€‰æ‹©è¿™ä¸ªå­—ç¬¦ï¼›
 ä¸æ–­é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°vecä¸ºç©ºï¼ˆè¿›å…¥i+1ä¸ªå¯†ç å­—ç¬¦ï¼‰ï¼Œæˆ–è€…å­—ç¬¦ä¸²séå†å®Œã€‚
 å¦‚æœæœ€ç»ˆå­—ç¬¦ä¸²séå†å®Œäº†ï¼Œvecè¿˜æœ‰å­—ç¬¦ï¼Œé‚£ä¹ˆå­˜åœ¨vecä¸­å­˜åœ¨çš„å­—ç¬¦ï¼Œå¿…ç„¶å°±æ˜¯å­—ç¬¦ä¸²sä¸å­˜åœ¨çš„å­—ç¬¦å­åºåˆ—ã€‚
 
 è¯æ˜ï¼š
 è¿™ä¸ªé¢˜ç›®æ²¡æœ‰æƒ³åˆ°å¾ˆå¥½çš„è¯æ˜æ–¹å¼ï¼Œå°±æ˜¯åœ¨åˆ†æé¢˜ç›®è¿‡ç¨‹ä¸­ï¼Œçªç„¶æµ®ç°åœ¨è„‘æµ·ä¸­çš„ä¸€ç§è´ªå¿ƒæ€è·¯ã€‚
 æ ¸å¿ƒæ€æƒ³ï¼Œå­—ç¬¦ä¸²æƒ³ç”¨æ›´å°‘å­—ç¬¦åŒºé—´å»è¦†ç›–å°æ˜èƒ½é€‰æ‹©çš„å­—ç¬¦ã€‚
 å¯¹äºç¬¬1ä¸ªå­—ç¬¦ï¼Œå‡è®¾æœ‰è‹¥å¹²ä¸ªé€‰æ‹©ï¼Œé‚£ä¹ˆå­—ç¬¦ä¸²sæœ€å°‘éœ€è¦åŒºé—´[1, pos1]æ‰èƒ½è¦†ç›–åˆ°è¿™ä¹ˆå¤šé€‰æ‹©ï¼›
 åŒç†å¯¹äºç¬¬2ä¸ªå­—ç¬¦ï¼Œæˆ‘ä»¬éœ€è¦[pos1 + 1, pos2]è¿™æ ·çš„åŒºé—´å»è¦†ç›–ï¼›
 ...
 ç›´åˆ°ç¬¬mä¸ªå­—ç¬¦ã€‚
 å‡è®¾å­—ç¬¦ä¸²mèƒ½åˆ‡å‰²å‡ºæ¥mä¸ªè¿™æ ·çš„åŒºé—´ï¼Œé‚£ä¹ˆå¿…ç„¶å°æ˜æ˜¯æ— è§£çš„ã€‚
 
 
 
 
 
 ************************* é¢˜è§£ ***********************/
#include<cstdio>
#include<cmath>
#include<stack>
#include<map>
#include<set>
#include<queue>
#include<deque>
#include<string>
#include<utility>
#include<sstream>
#include<cstring>
#include<iostream>
#include<algorithm>
using namespace std;
 
typedef long long lld;
 
class Solution {
    static const int N = 201010;
    string s;
    char a[20], b[20];
public:
    void solve() {
        int t;
        cin >> t;
        while (t--) {
            cin >> s;
            int m;
            cin >> m;
            cin >> a >> b;
            
            int ans = 0, pos = 0;
            for (int i = 0; i < m; ++i) {
                vector<char> v;
                for (int j = a[i]; j <= b[i]; ++j) {
                    v.push_back(j);
                }
                while (!v.empty() && pos < s.length()) {
                    vector<char>::iterator it =  find(v.begin(), v.end(), s[pos]);
                    if (it != v.end()) {
                        v.erase(it);
                    }
                    ++pos;
                }
                if (pos == s.length() && !v.empty()) {
                    ans = 1;
                }
            }
            cout << (ans == 1 ? "YES":"NO") << endl;
        }
    }
}
ac;
 
int main(int argc, const char * argv[]) {
    // insert code here...
    
    ac.solve();
    
    return 0;
}
 
